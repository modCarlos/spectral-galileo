# ğŸ“Š Diagramas Visuales: CÃ³mo Funciona el Backtester

## Diagrama 1: Flujo General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKTESTER AGENT-BASED                       â”‚
â”‚                   (Agent-Backtester.py)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘   PARA CADA DÃA DEL PERÃODO (2025-06-26 a 2025-12-23)    â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  1ï¸âƒ£  CARGAR DATOS HISTÃ“RICOS              â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
        â”‚  Ãšltimos 60 dÃ­as de Yahoo Finance        â”‚
        â”‚  Para cada ticker: AAPL, MSFT, etc.     â”‚
        â”‚                                          â”‚
        â”‚  Resultado: DataFrame con OHLCV          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  2ï¸âƒ£  EJECUTAR AGENTE LOCAL               â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
        â”‚  FinancialAgent.run_analysis()           â”‚
        â”‚                                          â”‚
        â”‚  Input: 60 dÃ­as histÃ³ricos               â”‚
        â”‚  Output: {technical, fundamental,        â”‚
        â”‚           sentiment, strategy}           â”‚
        â”‚                                          â”‚
        â”‚  â­ AQUÃ SE EJECUTA TU AGENTE â­         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  3ï¸âƒ£  CALCULAR SCORE COMPUESTO (0-100)    â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
        â”‚  Formula:                                â”‚
        â”‚                                          â”‚
        â”‚  SCORE = (TÃ—0.60) + (FÃ—0.25) + (SÃ—0.15) â”‚
        â”‚                                          â”‚
        â”‚  Donde:                                  â”‚
        â”‚    T = TÃ©cnico (RSI, MACD, Stoch)       â”‚
        â”‚    F = Fundamental (P/E, ROE, Debt)     â”‚
        â”‚    S = Sentimiento (News)                â”‚
        â”‚                                          â”‚
        â”‚  Resultado: Score 0-100                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  4ï¸âƒ£  CONVERTIR SCORE A SEÃ‘AL             â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
        â”‚  Si Score < 35  â†’ BUY                   â”‚
        â”‚  Si Score > 65  â†’ SELL                  â”‚
        â”‚  Si 35 â‰¤ Score â‰¤ 65 â†’ HOLD             â”‚
        â”‚                                          â”‚
        â”‚  Resultado: BUY / SELL / HOLD           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  5ï¸âƒ£  EJECUTAR TRADE                      â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
        â”‚  Si BUY:                                 â”‚
        â”‚    â€¢ Si NO hay posiciÃ³n actual           â”‚
        â”‚    â€¢ Comprar 10-15% del portfolio       â”‚
        â”‚                                          â”‚
        â”‚  Si SELL:                                â”‚
        â”‚    â€¢ Si HAY posiciÃ³n actual              â”‚
        â”‚    â€¢ Vender TODAS las acciones          â”‚
        â”‚                                          â”‚
        â”‚  Si HOLD:                                â”‚
        â”‚    â€¢ No hacer nada                       â”‚
        â”‚                                          â”‚
        â”‚  Resultado: Trade ejecutado en CSV       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  6ï¸âƒ£  REGISTRAR ESTADO DIARIO             â”‚
        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
        â”‚  â€¢ Portfolio value                       â”‚
        â”‚  â€¢ Posiciones actuales                   â”‚
        â”‚  â€¢ P&L realizado                         â”‚
        â”‚  â€¢ P&L no realizado                      â”‚
        â”‚                                          â”‚
        â”‚  Resultado: Fila en CSV diario           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  â†» SIGUIENTE DÃA (repetir desde 1)       â”‚
        â”‚  Total: 125 dÃ­as de trading              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘   AL FINAL DEL PERÃODO                                   â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
        â€¢ Cerrar todas las posiciones abiertas
        â€¢ Calcular mÃ©tricas finales
        â€¢ Generar reportes (HTML, CSV, TXT)
        â€¢ Mostrar resultados
```

---

## Diagrama 2: La FÃ³rmula del Score

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    CÃLCULO DEL SCORE (0-100)                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ANÃLISIS DEL AGENTE       â”‚
    â”‚   run_analysis()            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                ENTRADAS                         â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                                                 â”‚
        â”‚  TÃ‰CNICO (RSI, MACD, Stochastic)              â”‚
        â”‚  â”œâ”€ RSI = 38                                   â”‚
        â”‚  â”œâ”€ MACD Status = Bullish                      â”‚
        â”‚  â””â”€ Stoch K = 42                               â”‚
        â”‚                                                 â”‚
        â”‚  FUNDAMENTAL (P/E, ROE, Debt)                 â”‚
        â”‚  â”œâ”€ P/E = 18                                   â”‚
        â”‚  â”œâ”€ ROE = 0.22                                 â”‚
        â”‚  â””â”€ Debt/Equity = 0.4                          â”‚
        â”‚                                                 â”‚
        â”‚  SENTIMIENTO (News)                            â”‚
        â”‚  â””â”€ News Sentiment = positive                  â”‚
        â”‚                                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“

    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘  COMPONENTE 1: TÃ‰CNICO (60% del peso)              â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â”‚                                                     â”‚
    â”‚  RSI Score = 100 - RSI = 100 - 38 = 62             â”‚
    â”‚  MACD Score = 75 (Bullish)                         â”‚
    â”‚  Stoch Score = 100 - Stoch_K = 100 - 42 = 58      â”‚
    â”‚                                                     â”‚
    â”‚  Tech_Score = (62 Ã— 0.45) + (75 Ã— 0.35) + ...     â”‚
    â”‚             = 27.9 + 26.25 + 11.6                  â”‚
    â”‚             = 65.75                                â”‚
    â”‚                                                     â”‚
    â”‚  Peso Total: 60% â†’ ContribuciÃ³n: 65.75 Ã— 0.60     â”‚
    â”‚                                  = 39.45 puntos    â”‚
    â”‚                                                     â”‚
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘  COMPONENTE 2: FUNDAMENTAL (25% del peso)          â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â”‚                                                     â”‚
    â”‚  Base: 50                                           â”‚
    â”‚                                                     â”‚
    â”‚  P/E = 18:                                          â”‚
    â”‚  â””â”€ 15 < P/E < 25 â†’ +10                            â”‚
    â”‚  Base = 50 + 10 = 60                               â”‚
    â”‚                                                     â”‚
    â”‚  ROE = 0.22 (22%):                                 â”‚
    â”‚  â””â”€ ROE > 20% â†’ +15                                â”‚
    â”‚  Base = 60 + 15 = 75                               â”‚
    â”‚                                                     â”‚
    â”‚  Debt/Equity = 0.4:                                â”‚
    â”‚  â””â”€ 0.4 < 0.5 â†’ +10                                â”‚
    â”‚  Fund_Score = 75 + 10 = 85                         â”‚
    â”‚                                                     â”‚
    â”‚  Peso Total: 25% â†’ ContribuciÃ³n: 85 Ã— 0.25        â”‚
    â”‚                                  = 21.25 puntos    â”‚
    â”‚                                                     â”‚
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘  COMPONENTE 3: SENTIMIENTO (15% del peso)          â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â”‚                                                     â”‚
    â”‚  Base: 50                                           â”‚
    â”‚                                                     â”‚
    â”‚  News Sentiment = positive                         â”‚
    â”‚  â””â”€ News positivo â†’ +20                            â”‚
    â”‚  Sentiment_Score = 50 + 20 = 70                    â”‚
    â”‚                                                     â”‚
    â”‚  Peso Total: 15% â†’ ContribuciÃ³n: 70 Ã— 0.15        â”‚
    â”‚                                  = 10.5 puntos     â”‚
    â”‚                                                     â”‚
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                        â†“

    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘  SCORE FINAL = 39.45 + 21.25 + 10.5 = 71.2        â•‘
    â•‘                                                     â•‘
    â•‘  InterpretaciÃ³n:                                    â•‘
    â•‘  Score 71.2 > 65 â†’ SELL                            â•‘
    â•‘                                                     â•‘
    â•‘  (Pero solo si hay posiciÃ³n abierta)               â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Diagrama 3: Posiciones de Score

```
ESCALA DE SCORE Y ACCIONES

   0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 100
   â”‚                                                   â”‚
   â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
   â”‚          DIFERENTES INTERPRETACIONES             â”‚
   â”‚
   â”‚ 0-35: BUY FUERTE
   â”‚ â”œâ”€ RSI muy bajo (< 30)
   â”‚ â”œâ”€ Muy sobreevendido
   â”‚ â””â”€ âœ… ACCIÃ“N: COMPRAR
   â”‚
   â”‚ 35-55: HOLD o BUY DÃ‰BIL
   â”‚ â”œâ”€ Neutral
   â”‚ â””â”€ â¸ï¸ ACCIÃ“N: ESPERAR
   â”‚
   â”‚ 55-65: HOLD o SELL DÃ‰BIL
   â”‚ â”œâ”€ Neutral-alcista
   â”‚ â””â”€ â¸ï¸ ACCIÃ“N: ESPERAR
   â”‚
   â”‚ 65-100: SELL
   â”‚ â”œâ”€ RSI alto (> 70)
   â”‚ â”œâ”€ Muy sobrecomprado
   â”‚ â””â”€ âŒ ACCIÃ“N: VENDER


EJEMPLO GRÃFICO:

    100 â”‚                                 ğŸ”´ SELL
        â”‚                                ZONE
     80 â”‚                              â•±
     65 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•±â”€ Threshold SELL
        â”‚                           â•±
     55 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•±â”€ Neutral Zone
     45 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•±
     35 â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•±â”€ Threshold BUY
        â”‚                â•±
     20 â”‚             ğŸŸ¢ BUY
        â”‚           ZONE
      0 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## Diagrama 4: EjecuciÃ³n de Trades

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              LÃ“GICA DE EJECUCIÃ“N DE TRADES                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ENTRADA: Signal (BUY/SELL/HOLD) + Price + Tenencias actuales


  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Â¿Signal = BUY?          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ SÃ        â”‚ NO
        â†“           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Â¿Hay posiciÃ³n en TICKER?   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ SÃ        â”‚ NO (vacÃ­o)
        â†“           â†“
    NO COMPRAR    âœ… COMPRAR
    (ya tenemos)  â””â”€â†’ TamaÃ±o = 10-15% del portfolio
                      â””â”€â†’ Shares = int(TamaÃ±o / Price)
                      â””â”€â†’ Registrar en CSV


  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Â¿Signal = SELL?         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ SÃ        â”‚ NO
        â†“           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Â¿Hay posiciÃ³n en TICKER?   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ NO (vacÃ­o) â”‚ SÃ
        â†“            â†“
    NO VENDER    âœ… VENDER
    (nada que    â””â”€â†’ Shares = todas las acciones
     vender)     â””â”€â†’ Calcular P&L
                 â””â”€â†’ Registrar en CSV


  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Â¿Signal = HOLD?         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â†“
    â¸ï¸ NO HACER NADA
    (mantener posiciones actuales)


REGISTRAR EN CSV:

Date,Ticker,Type,Shares,Price,Total,Cash_After,P&L
2025-07-16,AAPL,BUY,47,209.86,9863.33,90136.67,
2025-12-22,AAPL,SELL,47,272.86,12824.42,102961.08,2961.08
```

---

## Diagrama 5: Comparativa Short vs Long Term

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              SHORT-TERM vs LONG-TERM STRATEGY                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


SHORT-TERM (Momentum - 6 meses)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    PerÃ­odo: 6 meses (180 dÃ­as)
    Enfoque: Capturar movimientos rÃ¡pidos
    
    Thresholds:
    â””â”€ Score < 35  â†’ BUY (agresivo)
    â””â”€ Score > 65  â†’ SELL (agresivo)
    â””â”€ Score 35-65 â†’ HOLD
    
    Resultado TÃ­pico:
    â”œâ”€ Retorno: 16.83%
    â”œâ”€ Sharpe: 2.39 (EXCELENTE)
    â”œâ”€ Max Drawdown: -5.2%
    â”œâ”€ Total Trades: ~10
    â”œâ”€ Win Rate: 60%
    â””â”€ Estilo: Muy activo, muchas transacciones
    
    GrÃ¡fico Equity:
    
    $120,000 â”‚     â•±â•²    â•±â•²    â•±â•²
    $110,000 â”‚  â•±â•²â•±  â•²â•±  â•±  â•²â•±  â•²â•±â•²
    $100,000 â”‚â”€â•±
             â”‚
             â””â”€ Muchos picos (trades frecuentes)


LONG-TERM (Fundamental - 5 aÃ±os)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    PerÃ­odo: 5 aÃ±os (1,254 dÃ­as)
    Enfoque: Invertir en empresas sÃ³lidas
    
    Thresholds:
    â””â”€ Score < 40  â†’ BUY (conservador)
    â””â”€ Score > 60  â†’ SELL (conservador)
    â””â”€ Score 40-60 â†’ HOLD
    
    Resultado TÃ­pico:
    â”œâ”€ Retorno: 31.86%
    â”œâ”€ Sharpe: 0.11 (bajo por volatilidad)
    â”œâ”€ Max Drawdown: -25.4%
    â”œâ”€ Total Trades: ~56
    â”œâ”€ Win Rate: 75%
    â””â”€ Estilo: Pasivo, esperar oportunidades
    
    GrÃ¡fico Equity:
    
    $150,000 â”‚                    â•±â•±â•±â•±â•±
    $130,000 â”‚              â•±â•±â•±â•±â•±â•±
    $110,000 â”‚          â•±â•±â•±â•±
    $100,000 â”‚   â•±â•±â•±â•±â•±
             â”‚ â”€â•±â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             â””â”€ Pocos cambios (estrategia pasiva)


DECISIÃ“N:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â¿Quieres ganancias rÃ¡pidas?         â”‚
â”‚ â†’ Short-term (Sharpe 2.39)          â”‚
â”‚                                      â”‚
â”‚ Â¿Quieres inversiÃ³n a largo plazo?   â”‚
â”‚ â†’ Long-term (Retorno 31.86%)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Diagrama 6: Componentes del Agente

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘            ANÃLISIS DEL AGENTE: 3 PILARES                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  INPUT: Ãšltimos 60 dÃ­as de datos histÃ³ricos     â”‚
    â”‚         (OHLCV + News + Macro data)             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
    
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘ ANÃLISIS TÃ‰CNICO (60% peso)                    â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â”‚                                                 â”‚
    â”‚ Indicadores Calculados:                        â”‚
    â”‚ â”œâ”€ RSI (14 perÃ­odos)                           â”‚
    â”‚ â”‚  â””â”€ Mide momentum y sobreventa/compra        â”‚
    â”‚ â”œâ”€ MACD (12, 26, 9)                            â”‚
    â”‚ â”‚  â””â”€ Mide tendencia                           â”‚
    â”‚ â””â”€ Stochastic (14, 3, 3)                       â”‚
    â”‚    â””â”€ Mide velocidad de cambio                 â”‚
    â”‚                                                 â”‚
    â”‚ Resultado:                                      â”‚
    â”‚ â””â”€ Tech_score (0-100)                          â”‚
    â”‚                                                 â”‚
    â•‘  ğŸ’» Ejecutado por: agent.py                    â•‘
    â•‘     RÃ¡pido, sensible, genera trades frecuentes â•‘
    â”‚                                                 â”‚
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            â†“

    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘ ANÃLISIS FUNDAMENTAL (25% peso)                â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â”‚                                                 â”‚
    â”‚ Ratios Financieros:                            â”‚
    â”‚ â”œâ”€ P/E Ratio                                   â”‚
    â”‚ â”‚  â””â”€ P/E bajo = barato, P/E alto = caro      â”‚
    â”‚ â”œâ”€ ROE (Return on Equity)                      â”‚
    â”‚ â”‚  â””â”€ Alta ROE = empresa eficiente             â”‚
    â”‚ â””â”€ Debt/Equity                                 â”‚
    â”‚    â””â”€ Bajo = poco riesgo, Alto = riesgo       â”‚
    â”‚                                                 â”‚
    â”‚ Resultado:                                      â”‚
    â”‚ â””â”€ Fund_score (0-100)                          â”‚
    â”‚                                                 â”‚
    â•‘  ğŸ“Š Ejecutado por: agent.py                    â•‘
    â•‘     Valora solidez, genera menos trades        â•‘
    â”‚                                                 â”‚
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            â†“

    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘ ANÃLISIS DE SENTIMIENTO (15% peso)             â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â”‚                                                 â”‚
    â”‚ Fuentes de InformaciÃ³n:                        â”‚
    â”‚ â”œâ”€ News reciente                               â”‚
    â”‚ â”œâ”€ AnÃ¡lisis de sentimientos                    â”‚
    â”‚ â””â”€ Macro data (tipo interÃ©s, inflaciÃ³n, etc)  â”‚
    â”‚                                                 â”‚
    â”‚ Resultado:                                      â”‚
    â”‚ â””â”€ Sentiment_score (0-100)                     â”‚
    â”‚                                                 â”‚
    â•‘  ğŸ“° Ejecutado por: agent.py                    â•‘
    â•‘     Captura contexto, actitud del mercado      â•‘
    â”‚                                                 â”‚
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                            â†“

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  OUTPUT: Score Compuesto (0-100)                â”‚
    â”‚          {technical, fundamental, sentiment,   â”‚
    â”‚           strategy, recommendations, ...}      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Diagrama 7: Flujo de Datos

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    FLUJO DE DATOS COMPLETO                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Yahoo Finance   â”‚
â”‚  API / CSV Files â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ BacktestDataManager         â”‚
    â”‚ â€¢ Descargar datos           â”‚
    â”‚ â€¢ Guardar en CSV local      â”‚
    â”‚ â€¢ Cargar desde CSV          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ AgentBacktester             â”‚
    â”‚ â€¢ Cargar datos histÃ³ricos   â”‚
    â”‚ â€¢ Iterar por cada dÃ­a       â”‚
    â”‚ â€¢ Generar seÃ±ales           â”‚
    â”‚ â€¢ Ejecutar trades           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ FinancialAgent              â”‚
    â”‚ â€¢ run_analysis()            â”‚
    â”‚ â€¢ Retorna scores/seÃ±ales    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ BacktestPortfolio           â”‚
    â”‚ â€¢ Registrar trades          â”‚
    â”‚ â€¢ Calcular P&L              â”‚
    â”‚ â€¢ Mark-to-market diario     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ AdvancedMetricsCalculator   â”‚
    â”‚ â€¢ Sharpe ratio              â”‚
    â”‚ â€¢ Max drawdown              â”‚
    â”‚ â€¢ Win rate                  â”‚
    â”‚ â€¢ Etc.                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ReportGeneratorV2           â”‚
    â”‚ â€¢ HTML report               â”‚
    â”‚ â€¢ CSV files                 â”‚
    â”‚ â€¢ TXT summary               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  backtest_resultsâ”‚
    â”‚  â€¢ HTML report   â”‚
    â”‚  â€¢ CSVs          â”‚
    â”‚  â€¢ TXT summary   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Estos diagramas muestran exactamente cÃ³mo funciona el sistema completo.**

Cada componente estÃ¡ integrado y cada paso es verificable en el cÃ³digo.
